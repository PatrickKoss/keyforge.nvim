# Keyforge Challenge Definitions
# Each challenge is a kata-style editing task
# 150 challenges across 15 categories

challenges:
  # ============================================
  # MOVEMENT CHALLENGES (20 total)
  # ============================================

  # Quick Movement (10)
  - id: movement_end_of_line
    name: "Jump to End"
    category: movement
    difficulty: 1
    description: "Move to the end of the line using $"
    filetype: text
    initial_buffer: |
      The quick brown fox jumps over the lazy dog
    validation_type: cursor_position
    expected_cursor: [0, 43]
    par_keystrokes: 1
    gold_base: 20

  - id: movement_start_of_line
    name: "Jump to Start"
    category: movement
    difficulty: 1
    description: "Move to the first non-blank character using ^"
    filetype: text
    initial_buffer: |
          indented text here
    validation_type: cursor_position
    expected_cursor: [0, 4]
    par_keystrokes: 1
    gold_base: 20

  - id: movement_line_zero
    name: "Column Zero"
    category: movement
    difficulty: 1
    description: "Move to column 0 using 0"
    filetype: text
    initial_buffer: |
          indented text here
    cursor_start: [0, 10]
    validation_type: cursor_position
    expected_cursor: [0, 0]
    par_keystrokes: 1
    gold_base: 20

  - id: movement_word_forward
    name: "Word Forward"
    category: movement
    difficulty: 1
    description: "Move forward one word using w"
    filetype: text
    initial_buffer: |
      one two three four five
    validation_type: cursor_position
    expected_cursor: [0, 4]
    par_keystrokes: 1
    gold_base: 20

  - id: movement_word_backward
    name: "Word Backward"
    category: movement
    difficulty: 1
    description: "Move backward one word using b"
    filetype: text
    initial_buffer: |
      one two three four five
    cursor_start: [0, 14]
    validation_type: cursor_position
    expected_cursor: [0, 8]
    par_keystrokes: 1
    gold_base: 20

  - id: movement_word_end
    name: "Word End"
    category: movement
    difficulty: 1
    description: "Move to end of word using e"
    filetype: text
    initial_buffer: |
      hello world example
    validation_type: cursor_position
    expected_cursor: [0, 4]
    par_keystrokes: 1
    gold_base: 20

  - id: movement_find_char
    name: "Find Character"
    category: movement
    difficulty: 1
    description: "Jump to the letter 'x' using fx"
    filetype: text
    initial_buffer: |
      The fox jumped over the box
    validation_type: cursor_position
    expected_cursor: [0, 6]
    par_keystrokes: 2
    gold_base: 25

  - id: movement_till_char
    name: "Till Character"
    category: movement
    difficulty: 1
    description: "Move till (before) the letter 'x' using tx"
    filetype: text
    initial_buffer: |
      The fox jumped over the box
    validation_type: cursor_position
    expected_cursor: [0, 5]
    par_keystrokes: 2
    gold_base: 25

  - id: movement_find_char_back
    name: "Find Backward"
    category: movement
    difficulty: 1
    description: "Find 'o' backward using Fo"
    filetype: text
    initial_buffer: |
      The fox jumped over the box
    cursor_start: [0, 20]
    validation_type: cursor_position
    expected_cursor: [0, 17]
    par_keystrokes: 2
    gold_base: 25

  - id: movement_till_char_back
    name: "Till Backward"
    category: movement
    difficulty: 1
    description: "Move till 'o' backward using To"
    filetype: text
    initial_buffer: |
      The fox jumped over the box
    cursor_start: [0, 20]
    validation_type: cursor_position
    expected_cursor: [0, 18]
    par_keystrokes: 2
    gold_base: 25

  # Standard Movement (7)
  - id: movement_word_forward_5
    name: "Word Hop"
    category: movement
    difficulty: 2
    description: "Move forward 5 words using 5w"
    filetype: text
    initial_buffer: |
      one two three four five six seven eight
    validation_type: cursor_position
    expected_cursor: [0, 24]
    par_keystrokes: 2
    gold_base: 30

  - id: movement_goto_line
    name: "Line Jump"
    category: movement
    difficulty: 2
    description: "Go to line 5 using 5G or :5"
    filetype: text
    initial_buffer: |
      Line 1
      Line 2
      Line 3
      Line 4
      Target line here
      Line 6
    validation_type: cursor_position
    expected_cursor: [4, 0]
    par_keystrokes: 2
    gold_base: 30

  - id: movement_paragraph_forward
    name: "Paragraph Forward"
    category: movement
    difficulty: 2
    description: "Jump to the next paragraph using }"
    filetype: text
    initial_buffer: |
      First paragraph with
      multiple lines of
      text here.

      Second paragraph starts
      on this line.
    validation_type: cursor_position
    expected_cursor: [4, 0]
    par_keystrokes: 1
    gold_base: 30

  - id: movement_paragraph_backward
    name: "Paragraph Backward"
    category: movement
    difficulty: 2
    description: "Jump to the previous paragraph using {"
    filetype: text
    initial_buffer: |
      First paragraph with
      multiple lines.

      Second paragraph here.
    cursor_start: [3, 0]
    validation_type: cursor_position
    expected_cursor: [0, 0]
    par_keystrokes: 1
    gold_base: 30

  - id: movement_matching_bracket
    name: "Bracket Match"
    category: movement
    difficulty: 2
    description: "Jump to the matching bracket using %"
    filetype: javascript
    initial_buffer: |
      function example() {
        if (condition) {
          doSomething();
        }
      }
    cursor_start: [0, 19]
    validation_type: cursor_position
    expected_cursor: [4, 0]
    par_keystrokes: 1
    gold_base: 35

  - id: movement_search_forward
    name: "Search Forward"
    category: movement
    difficulty: 2
    description: "Search for 'error' using /error"
    filetype: javascript
    initial_buffer: |
      function process(data) {
        if (!data) {
          throw new Error("Invalid");
        }
        if (data.error) {
          console.log("Found error");
        }
      }
    validation_type: cursor_position
    expected_cursor: [4, 11]
    par_keystrokes: 7
    gold_base: 40

  - id: movement_search_backward
    name: "Search Backward"
    category: movement
    difficulty: 2
    description: "Search backward for 'const' using ?const"
    filetype: javascript
    initial_buffer: |
      const first = 1;
      const second = 2;
      let current = 3;
    cursor_start: [2, 0]
    validation_type: cursor_position
    expected_cursor: [1, 0]
    par_keystrokes: 7
    gold_base: 40

  # Complex Movement (3)
  - id: movement_mark_jump
    name: "Mark and Return"
    category: movement
    difficulty: 3
    description: "Set mark 'a', go to line 5, then return to mark with 'a"
    filetype: text
    initial_buffer: |
      Start here
      Line 2
      Line 3
      Line 4
      Line 5
      Line 6
    validation_type: cursor_position
    expected_cursor: [0, 0]
    par_keystrokes: 6
    gold_base: 50

  - id: movement_jump_list_back
    name: "Jump Back"
    category: movement
    difficulty: 3
    description: "Use Ctrl-O to jump back to a previous location. First navigate somewhere (e.g., G to end), then Ctrl-O returns you."
    filetype: text
    initial_buffer: |
      First location
      Second location
      Third location
      Fourth location
      Fifth location
    validation_type: different
    par_keystrokes: 2
    gold_base: 45

  - id: movement_jump_list_forward
    name: "Jump Forward"
    category: movement
    difficulty: 3
    description: "Use Ctrl-I to jump forward after using Ctrl-O. First jump back with Ctrl-O, then Ctrl-I moves forward again."
    filetype: text
    initial_buffer: |
      First location
      Second location
      Third location
    validation_type: different
    par_keystrokes: 2
    gold_base: 45

  # ============================================
  # TEXT OBJECT CHALLENGES (18 total)
  # ============================================

  # Quick Text Objects (6)
  - id: text_delete_word
    name: "Delete Word"
    category: text-objects
    difficulty: 1
    description: "Delete the word 'remove' using dw"
    filetype: text
    initial_buffer: |
      Please remove this word
    cursor_start: [0, 7]
    expected_buffer: |
      Please this word
    validation_type: exact_match
    par_keystrokes: 2
    gold_base: 25

  - id: text_change_word
    name: "Change Word"
    category: text-objects
    difficulty: 1
    description: "Change 'hello' to 'world' using cw"
    filetype: text
    initial_buffer: |
      Say hello friend
    cursor_start: [0, 4]
    expected_buffer: |
      Say world friend
    validation_type: exact_match
    par_keystrokes: 8
    gold_base: 30

  - id: text_delete_line
    name: "Delete Line"
    category: text-objects
    difficulty: 1
    description: "Delete the entire line using dd"
    filetype: text
    initial_buffer: |
      Keep this line
      Delete this line
      Keep this too
    cursor_start: [1, 0]
    expected_buffer: |
      Keep this line
      Keep this too
    validation_type: exact_match
    par_keystrokes: 2
    gold_base: 25

  - id: text_yank_line
    name: "Yank Line"
    category: text-objects
    difficulty: 1
    description: "Yank the line and paste it below using yyp"
    filetype: text
    initial_buffer: |
      Duplicate me
    expected_buffer: |
      Duplicate me
      Duplicate me
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 25

  - id: text_delete_to_end
    name: "Delete to End"
    category: text-objects
    difficulty: 1
    description: "Delete from cursor to end of line using D"
    filetype: text
    initial_buffer: |
      Keep this delete this part
    cursor_start: [0, 10]
    expected_buffer: |
      Keep this
    validation_type: exact_match
    par_keystrokes: 1
    gold_base: 20

  - id: text_change_to_end
    name: "Change to End"
    category: text-objects
    difficulty: 1
    description: "Change from cursor to end of line using C"
    filetype: text
    initial_buffer: |
      Keep this old ending
    cursor_start: [0, 10]
    expected_buffer: |
      Keep this new ending
    validation_type: exact_match
    par_keystrokes: 12
    gold_base: 30

  # Standard Text Objects (8)
  - id: text_change_inner_word
    name: "Change Inner Word"
    category: text-objects
    difficulty: 2
    description: "Change 'hello' to 'world' using ciw"
    filetype: text
    initial_buffer: |
      Say hello to everyone
    expected_buffer: |
      Say world to everyone
    validation_type: exact_match
    par_keystrokes: 9
    gold_base: 35

  - id: text_delete_around_word
    name: "Delete Around Word"
    category: text-objects
    difficulty: 2
    description: "Delete the word including spaces using daw"
    filetype: text
    initial_buffer: |
      one two three four
    cursor_start: [0, 4]
    expected_buffer: |
      one three four
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 35

  - id: text_change_inner_quotes
    name: "Change Inside Quotes"
    category: text-objects
    difficulty: 2
    description: "Change the text inside quotes to 'updated' using ci\" then type 'updated' and Esc"
    filetype: javascript
    initial_buffer: |
      const message = "old value";
    expected_buffer: |
      const message = "updated";
    validation_type: exact_match
    par_keystrokes: 12
    gold_base: 45

  - id: text_delete_inner_parens
    name: "Delete Inside Parens"
    category: text-objects
    difficulty: 2
    description: "Delete everything inside parentheses using di("
    filetype: javascript
    initial_buffer: |
      console.log(getValue());
    cursor_start: [0, 12]
    expected_buffer: |
      console.log();
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 40

  - id: text_change_inner_brackets
    name: "Change Inside Brackets"
    category: text-objects
    difficulty: 2
    description: "Change array contents using ci[ then type '4, 5, 6' and Esc"
    filetype: javascript
    initial_buffer: |
      const items = [1, 2, 3];
    cursor_start: [0, 15]
    expected_buffer: |
      const items = [4, 5, 6];
    validation_type: exact_match
    par_keystrokes: 11
    gold_base: 45

  - id: text_delete_inner_braces
    name: "Empty Function Body"
    category: text-objects
    difficulty: 2
    description: "Delete everything inside braces using di{"
    filetype: javascript
    initial_buffer: |
      function cleanup() {
        const temp = getData();
        return temp;
      }
    cursor_start: [0, 20]
    expected_buffer: |
      function cleanup() {
      }
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 45

  - id: text_yank_paragraph
    name: "Yank Paragraph"
    category: text-objects
    difficulty: 2
    description: "Yank paragraph and paste at end: 1) yip to yank inner paragraph, 2) G to go to end, 3) p to paste below"
    filetype: text
    initial_buffer: |
      First paragraph
      with two lines.

      Second paragraph.
    expected_buffer: |
      First paragraph
      with two lines.

      Second paragraph.

      First paragraph
      with two lines.
    validation_type: exact_match
    par_keystrokes: 5
    gold_base: 55

  - id: text_change_inner_tag
    name: "Change Tag Content"
    category: text-objects
    difficulty: 2
    description: "Change text inside HTML tag using cit, then type 'New content' and Esc"
    filetype: html
    initial_buffer: |
      <p>Old content here</p>
    expected_buffer: |
      <p>New content</p>
    validation_type: exact_match
    par_keystrokes: 15
    gold_base: 50

  # Complex Text Objects (4)
  - id: text_change_around_quotes
    name: "Change Around Quotes"
    category: text-objects
    difficulty: 3
    description: "Change text including quotes using ca\", then type 'world' with single quotes and Esc"
    filetype: javascript
    initial_buffer: |
      const msg = "hello";
    cursor_start: [0, 14]
    expected_buffer: |
      const msg = 'world';
    validation_type: exact_match
    par_keystrokes: 11
    gold_base: 55

  - id: text_visual_inner_block
    name: "Visual Inner Block"
    category: text-objects
    difficulty: 3
    description: "Select and delete inner block: 1) vib to visually select inner block, 2) d to delete"
    filetype: javascript
    initial_buffer: |
      if (condition) {
        code here;
        more code;
      }
    cursor_start: [1, 2]
    expected_buffer: |
      if (condition) {
      }
    validation_type: exact_match
    par_keystrokes: 4
    gold_base: 55

  - id: text_delete_nested_parens
    name: "Delete Nested Parens"
    category: text-objects
    difficulty: 3
    description: "Delete outer parentheses content using da("
    filetype: javascript
    initial_buffer: |
      result = outer(inner(value));
    cursor_start: [0, 9]
    expected_buffer: |
      result = ;
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 60

  - id: text_change_sentence
    name: "Rewrite Sentence"
    category: text-objects
    difficulty: 3
    description: "Change entire sentence using cis, then type 'Hello there.' and Esc"
    filetype: text
    initial_buffer: |
      This is the old sentence. Keep this one.
    expected_buffer: |
      Hello there. Keep this one.
    validation_type: exact_match
    par_keystrokes: 16
    gold_base: 55

  # ============================================
  # LSP NAVIGATION CHALLENGES (15 total)
  # ============================================

  # Quick LSP (5)
  - id: lsp_hover
    name: "Hover Info"
    category: lsp-navigation
    difficulty: 1
    description: "View hover information using K"
    hint_action: "hover"
    hint_fallback: "Use K or your hover keymap"
    filetype: typescript
    initial_buffer: |
      function calculateSum(a: number, b: number): number {
        return a + b;
      }
      const result = calculateSum(5, 3);
    cursor_start: [3, 17]
    validation_type: different
    par_keystrokes: 1
    gold_base: 30

  - id: lsp_signature_help
    name: "Signature Help"
    category: lsp-navigation
    difficulty: 1
    description: "View function signature using Ctrl-K in insert mode (or your signature help keymap). A popup shows parameter info."
    hint_action: "signature_help"
    hint_fallback: "Use Ctrl-K in insert mode"
    filetype: typescript
    initial_buffer: |
      function greet(name: string, age: number) {}
      greet(
    cursor_start: [1, 6]
    validation_type: different
    par_keystrokes: 2
    gold_base: 35

  - id: lsp_goto_definition
    name: "Go to Definition"
    category: lsp-navigation
    difficulty: 1
    description: "Jump to function definition using gd"
    hint_action: "goto_definition"
    hint_fallback: "Use gd or your definition keymap"
    filetype: javascript
    initial_buffer: |
      function getUserName(user) {
        return user.name;
      }

      const name = getUserName(currentUser);
    cursor_start: [4, 15]
    validation_type: cursor_position
    expected_cursor: [0, 9]
    par_keystrokes: 2
    gold_base: 40

  - id: lsp_goto_declaration
    name: "Go to Declaration"
    category: lsp-navigation
    difficulty: 1
    description: "Jump to declaration using gD"
    hint_action: "goto_declaration"
    hint_fallback: "Use gD or your declaration keymap"
    filetype: javascript
    initial_buffer: |
      let counter = 0;

      function increment() {
        counter++;
      }
    cursor_start: [3, 4]
    validation_type: cursor_position
    expected_cursor: [0, 4]
    par_keystrokes: 2
    gold_base: 40

  - id: lsp_goto_implementation
    name: "Go to Implementation"
    category: lsp-navigation
    difficulty: 1
    description: "Jump to implementation using gi"
    hint_action: "goto_implementation"
    hint_fallback: "Use gi or your implementation keymap"
    filetype: typescript
    initial_buffer: |
      interface Logger {
        log(msg: string): void;
      }

      class ConsoleLogger implements Logger {
        log(msg: string) { console.log(msg); }
      }
    cursor_start: [1, 4]
    validation_type: different
    par_keystrokes: 2
    gold_base: 45

  # Standard LSP (7)
  - id: lsp_find_references
    name: "Find References"
    category: lsp-navigation
    difficulty: 2
    description: "Find all references using gr"
    hint_action: "find_references"
    hint_fallback: "Use gr or your references keymap"
    filetype: javascript
    initial_buffer: |
      let count = 0;

      function increment() {
        count++;
      }

      function getCount() {
        return count;
      }
    cursor_start: [0, 4]
    validation_type: different
    par_keystrokes: 2
    gold_base: 50

  - id: lsp_type_definition
    name: "Type Definition"
    category: lsp-navigation
    difficulty: 2
    description: "Go to the type definition using gy (or your type definition keymap). Cursor moves to where the type is defined."
    hint_action: "type_definition"
    hint_fallback: "Use your type definition keymap"
    filetype: typescript
    initial_buffer: |
      interface User {
        name: string;
        age: number;
      }

      const user: User = { name: "John", age: 30 };
    cursor_start: [5, 12]
    validation_type: different
    par_keystrokes: 3
    gold_base: 50

  - id: lsp_code_action
    name: "Code Action"
    category: lsp-navigation
    difficulty: 2
    description: "Open the code action menu using <leader>ca (or your code action keymap). A menu of available fixes/refactors appears."
    hint_action: "code_action"
    hint_fallback: "Use your code action keymap"
    filetype: typescript
    initial_buffer: |
      const unused = 5;
      console.log("hello");
    cursor_start: [0, 6]
    validation_type: different
    par_keystrokes: 3
    gold_base: 55

  - id: lsp_rename_symbol
    name: "Rename Symbol"
    category: lsp-navigation
    difficulty: 2
    description: "Rename 'oldName' to 'newName': 1) Cursor on 'oldName', 2) Press <leader>rn (or your rename keymap), 3) Type 'newName', 4) Confirm."
    hint_action: "rename"
    hint_fallback: "Use your rename keymap"
    filetype: javascript
    initial_buffer: |
      const oldName = "test";
      console.log(oldName);
      process(oldName);
    expected_buffer: |
      const newName = "test";
      console.log(newName);
      process(newName);
    cursor_start: [0, 6]
    validation_type: exact_match
    par_keystrokes: 12
    gold_base: 65

  - id: lsp_document_symbols
    name: "Document Symbols"
    category: lsp-navigation
    difficulty: 2
    description: "Open document symbols using <leader>ds (or your document symbols keymap). Pick a function/class to jump to it."
    hint_action: "document_symbols"
    hint_fallback: "Use your document symbols keymap"
    filetype: javascript
    initial_buffer: |
      function first() {}
      function second() {}
      const third = () => {};
    validation_type: different
    par_keystrokes: 4
    gold_base: 45
    required_plugin: telescope

  - id: lsp_workspace_symbols
    name: "Workspace Symbols"
    category: lsp-navigation
    difficulty: 2
    description: "Search workspace symbols using <leader>ws (or your workspace symbols keymap). Type to filter symbols across all files."
    hint_action: "workspace_symbols"
    hint_fallback: "Use your workspace symbols keymap"
    filetype: javascript
    initial_buffer: |
      // Search for symbols across workspace
    validation_type: different
    par_keystrokes: 4
    gold_base: 50
    required_plugin: telescope

  - id: lsp_diagnostic_float
    name: "Show Diagnostic"
    category: lsp-navigation
    difficulty: 2
    description: "Show diagnostic details using <leader>e or gl (or your diagnostic float keymap). A popup shows the full error message."
    hint_action: "diagnostic_float"
    hint_fallback: "Use your diagnostic float keymap"
    filetype: typescript
    initial_buffer: |
      const x: number = "string";
    cursor_start: [0, 18]
    validation_type: different
    par_keystrokes: 3
    gold_base: 40

  # Complex LSP (3)
  - id: lsp_go_to_interface
    name: "Go to Interface"
    category: lsp-navigation
    difficulty: 3
    description: "Navigate to interface definition using gd on 'Printable'. Cursor should jump to line 1 where interface is defined."
    hint_action: "goto_definition"
    hint_fallback: "Use gd on the type"
    filetype: typescript
    initial_buffer: |
      interface Printable {
        print(): void;
      }

      class Document implements Printable {
        print() { console.log("doc"); }
      }
    cursor_start: [4, 30]
    validation_type: cursor_position
    expected_cursor: [0, 10]
    par_keystrokes: 2
    gold_base: 60

  - id: lsp_find_implementations
    name: "Find Implementations"
    category: lsp-navigation
    difficulty: 3
    description: "Find implementations using gi (or your implementation keymap). A list shows all classes implementing this interface."
    hint_action: "goto_implementation"
    hint_fallback: "Use gi or implementations keymap"
    filetype: typescript
    initial_buffer: |
      interface Animal {
        speak(): void;
      }

      class Dog implements Animal {
        speak() { console.log("woof"); }
      }

      class Cat implements Animal {
        speak() { console.log("meow"); }
      }
    cursor_start: [1, 4]
    validation_type: different
    par_keystrokes: 2
    gold_base: 65

  - id: lsp_organize_imports
    name: "Organize Imports"
    category: lsp-navigation
    difficulty: 3
    description: "Organize imports: 1) Press <leader>ca (code action), 2) Select 'Organize Imports'. Imports get sorted/cleaned."
    hint_action: "code_action"
    hint_fallback: "Use code action to organize imports"
    filetype: typescript
    initial_buffer: |
      import { z } from 'zod';
      import { a } from 'alpha';

      const schema = z.string();
    validation_type: different
    par_keystrokes: 5
    gold_base: 70

  # ============================================
  # SEARCH AND REPLACE CHALLENGES (12 total)
  # ============================================

  # Quick Search (4)
  - id: search_current_word
    name: "Search Word"
    category: search-replace
    difficulty: 1
    description: "Search for word under cursor using *"
    filetype: text
    initial_buffer: |
      The word appears here.
      Find the word again.
      The word is common.
    cursor_start: [0, 4]
    validation_type: cursor_position
    expected_cursor: [1, 9]
    par_keystrokes: 1
    gold_base: 25

  - id: search_current_word_back
    name: "Search Word Backward"
    category: search-replace
    difficulty: 1
    description: "Search backward for word under cursor using #"
    filetype: text
    initial_buffer: |
      The word appears here.
      Find the word again.
      The word is common.
    cursor_start: [2, 4]
    validation_type: cursor_position
    expected_cursor: [1, 9]
    par_keystrokes: 1
    gold_base: 25

  - id: search_next
    name: "Next Match"
    category: search-replace
    difficulty: 1
    description: "Go to next search match using n. First search with / or * to have an active pattern, then n jumps to next match."
    filetype: text
    initial_buffer: |
      First match here.
      Second match here.
      Third match here.
    validation_type: different
    par_keystrokes: 1
    gold_base: 20

  - id: search_prev
    name: "Previous Match"
    category: search-replace
    difficulty: 1
    description: "Go to previous search match using N. First search with / or * to have an active pattern, then N jumps backward."
    filetype: text
    initial_buffer: |
      First match here.
      Second match here.
      Third match here.
    cursor_start: [2, 0]
    validation_type: different
    par_keystrokes: 1
    gold_base: 20

  # Standard Search (5)
  - id: search_replace_line
    name: "Replace on Line"
    category: search-replace
    difficulty: 2
    description: "Replace 'foo' with 'bar' on this line using :s/foo/bar/"
    filetype: text
    initial_buffer: |
      The foo is here
    expected_buffer: |
      The bar is here
    validation_type: exact_match
    par_keystrokes: 13
    gold_base: 35

  - id: search_replace_global
    name: "Global Replace"
    category: search-replace
    difficulty: 2
    description: "Replace all 'old' with 'new' using :%s/old/new/g"
    filetype: text
    initial_buffer: |
      old value here
      another old one
      old again
    expected_buffer: |
      new value here
      another new one
      new again
    validation_type: exact_match
    par_keystrokes: 16
    gold_base: 50

  - id: search_replace_confirm
    name: "Confirm Replace"
    category: search-replace
    difficulty: 2
    description: "Replace with confirmation using :%s/TODO/DONE/gc"
    filetype: text
    initial_buffer: |
      TODO: first task
      TODO: second task
      TODO: keep this one
    expected_buffer: |
      DONE: first task
      DONE: second task
      TODO: keep this one
    validation_type: exact_match
    par_keystrokes: 20
    gold_base: 55

  - id: search_delete_lines
    name: "Delete Matching Lines"
    category: search-replace
    difficulty: 2
    description: "Delete all lines containing 'debug' using :g/debug/d"
    filetype: javascript
    initial_buffer: |
      console.log("start");
      console.debug("debug info");
      process();
      console.debug("more debug");
      console.log("end");
    expected_buffer: |
      console.log("start");
      process();
      console.log("end");
    validation_type: exact_match
    par_keystrokes: 12
    gold_base: 50

  - id: search_visual_selection
    name: "Search Selection"
    category: search-replace
    difficulty: 2
    description: "Search for selected text: 1) v to start visual, 2) Select 'phrase', 3) y to yank, 4) / then Ctrl-R 0 to paste, 5) Enter."
    filetype: text
    initial_buffer: |
      Find this phrase here.
      The phrase appears again.
      Another phrase instance.
    validation_type: different
    par_keystrokes: 5
    gold_base: 45

  # Complex Search (3)
  - id: search_regex_groups
    name: "Regex with Groups"
    category: search-replace
    difficulty: 3
    description: "Swap names using :s/\\(\\w\\+\\) \\(\\w\\+\\)/\\2 \\1/ - \\1 captures 'John', \\2 captures 'Smith', then \\2 \\1 outputs 'Smith John'."
    filetype: text
    initial_buffer: |
      John Smith
    expected_buffer: |
      Smith John
    validation_type: exact_match
    par_keystrokes: 25
    gold_base: 70

  - id: search_visual_replace
    name: "Replace in Selection"
    category: search-replace
    difficulty: 3
    description: "Replace in selection: 1) V to select line 2 only, 2) Type :s/foo/baz/g, 3) Enter. Only the selected line changes."
    hint_action: "visual_replace"
    hint_fallback: "Select text, then use :s/old/new/g"
    filetype: text
    initial_buffer: |
      foo bar foo
      foo bar foo
      foo bar foo
    expected_buffer: |
      foo bar foo
      baz bar baz
      foo bar foo
    validation_type: exact_match
    par_keystrokes: 20
    gold_base: 65

  - id: search_very_magic
    name: "Very Magic Regex"
    category: search-replace
    difficulty: 3
    description: "Format phone with :s/\\v(\\d{3})-(\\d{3})-(\\d{4})/(\\1) \\2-\\3/ - \\v enables very magic so () don't need escaping."
    filetype: text
    initial_buffer: |
      phone: 123-456-7890
    expected_buffer: |
      phone: (123) 456-7890
    validation_type: exact_match
    par_keystrokes: 30
    gold_base: 75

  # ============================================
  # REFACTORING CHALLENGES (10 total)
  # ============================================

  # Quick Refactoring (2)
  - id: refactor_join_lines
    name: "Join Lines"
    category: refactoring
    difficulty: 1
    description: "Join two lines using J"
    filetype: text
    initial_buffer: |
      First part
      second part
    expected_buffer: |
      First part second part
    validation_type: exact_match
    par_keystrokes: 1
    gold_base: 20

  - id: refactor_indent
    name: "Indent Line"
    category: refactoring
    difficulty: 1
    description: "Indent the line using >>"
    filetype: javascript
    initial_buffer: |
      if (true) {
      code();
      }
    cursor_start: [1, 0]
    expected_buffer: |
      if (true) {
        code();
      }
    validation_type: exact_match
    par_keystrokes: 2
    gold_base: 25

  # Standard Refactoring (5)
  - id: refactor_extract_variable
    name: "Extract Variable"
    category: refactoring
    difficulty: 2
    description: "Extract to 'total': 1) v to visual select the expression, 2) d to cut, 3) O for new line above, 4) Type 'const total = ' then p to paste, 5) Replace original expression with 'total'."
    filetype: javascript
    initial_buffer: |
      function getPrice(items) {
        return items.reduce((a, b) => a + b.price, 0) * 1.1;
      }
    validation_type: contains
    expected_content: "const total"
    par_keystrokes: 40
    gold_base: 75

  - id: refactor_inline_variable
    name: "Inline Variable"
    category: refactoring
    difficulty: 2
    description: "Inline 'temp': 1) yiw on 'x * 2' to yank expression, 2) Go to line 3, 3) ciw on 'temp' to change it, 4) Ctrl-R 0 to paste, 5) dd on line 2 to delete it."
    filetype: javascript
    initial_buffer: |
      function process(x) {
        const temp = x * 2;
        return temp;
      }
    expected_buffer: |
      function process(x) {
        return x * 2;
      }
    validation_type: exact_match
    par_keystrokes: 15
    gold_base: 55

  - id: refactor_rename_function
    name: "Rename Function"
    category: refactoring
    difficulty: 2
    description: "Rename 'fn' to 'calculateTotal' everywhere using :%s/fn/calculateTotal/g or use LSP rename (<leader>rn)."
    filetype: javascript
    initial_buffer: |
      function fn(items) {
        return items.reduce((a, b) => a + b, 0);
      }

      const result = fn([1, 2, 3]);
    expected_buffer: |
      function calculateTotal(items) {
        return items.reduce((a, b) => a + b, 0);
      }

      const result = calculateTotal([1, 2, 3]);
    validation_type: exact_match
    par_keystrokes: 30
    gold_base: 70

  - id: refactor_add_parameter
    name: "Add Parameter"
    category: refactoring
    difficulty: 2
    description: "Add 'multiplier' parameter: 1) f) to find closing paren, 2) i to insert, 3) Type ', multiplier = 1', 4) Update function body to use multiplier."
    filetype: javascript
    initial_buffer: |
      function calculate(value) {
        return value * 2;
      }
    validation_type: contains
    expected_content: "multiplier"
    par_keystrokes: 35
    gold_base: 65

  - id: refactor_change_signature
    name: "Change Signature"
    category: refactoring
    difficulty: 2
    description: "Swap parameter order: 1) f, to find comma, 2) dt) to delete 'greeting', 3) f( to find opening paren, 4) a to append, 5) Type 'greeting, ' to insert before name."
    filetype: javascript
    initial_buffer: |
      function greet(name, greeting) {
        return greeting + ", " + name;
      }
    expected_buffer: |
      function greet(greeting, name) {
        return greeting + ", " + name;
      }
    validation_type: exact_match
    par_keystrokes: 20
    gold_base: 60

  # Complex Refactoring (3)
  - id: refactor_extract_function
    name: "Extract Function"
    category: refactoring
    difficulty: 3
    description: "Extract function: 1) V to select lines 2-4 (the if block), 2) d to cut, 3) Go above, create 'function validateEmail(email) { }', 4) p to paste inside, 5) Replace original with 'validateEmail(data.email);'."
    filetype: javascript
    initial_buffer: |
      function processForm(data) {
        if (!data.email || !data.email.includes('@')) {
          throw new Error('Invalid email');
        }
        saveData(data);
      }
    validation_type: function_exists
    function_name: validateEmail
    par_keystrokes: 60
    gold_base: 100

  - id: refactor_convert_to_arrow
    name: "Convert to Arrow"
    category: refactoring
    difficulty: 3
    description: "Convert to arrow: 1) Delete 'function', 2) Change '(x) {' to '(x) =>', 3) Remove 'return' and replace with expression, 4) Delete closing brace. Result: 'const double = (x) => x * 2;'."
    filetype: javascript
    initial_buffer: |
      const double = function(x) {
        return x * 2;
      };
    expected_buffer: |
      const double = (x) => x * 2;
    validation_type: exact_match
    par_keystrokes: 25
    gold_base: 65

  - id: refactor_destructure
    name: "Destructure Object"
    category: refactoring
    difficulty: 3
    description: "Destructure: 1) Change 'person' to '{ name, age }' in params, 2) Replace 'person.name' with 'name' and 'person.age' with 'age' using :%s/person\\.//g."
    filetype: javascript
    initial_buffer: |
      function greet(person) {
        console.log(person.name + " is " + person.age);
      }
    expected_buffer: |
      function greet({ name, age }) {
        console.log(name + " is " + age);
      }
    validation_type: contains
    expected_content: "{ name, age }"
    par_keystrokes: 40
    gold_base: 80

  # ============================================
  # GIT OPERATIONS CHALLENGES (12 total)
  # ============================================

  # Quick Git (4)
  - id: git_next_hunk
    name: "Next Hunk"
    category: git-operations
    difficulty: 1
    description: "Jump to next git hunk using ]h or ]c (or your next hunk keymap). Cursor moves to the next changed section."
    hint_action: "next_hunk"
    hint_fallback: "Use ]h or ]c for next hunk"
    filetype: javascript
    initial_buffer: |
      const unchanged = 1;
      const modified = "changed";
      const alsoChanged = true;
    validation_type: different
    par_keystrokes: 2
    gold_base: 30
    required_plugin: gitsigns

  - id: git_prev_hunk
    name: "Previous Hunk"
    category: git-operations
    difficulty: 1
    description: "Jump to previous git hunk using [h or [c (or your prev hunk keymap). Cursor moves to the previous changed section."
    hint_action: "prev_hunk"
    hint_fallback: "Use [h or [c for previous hunk"
    filetype: javascript
    initial_buffer: |
      const modified = "changed";
      const unchanged = 1;
    cursor_start: [1, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 30
    required_plugin: gitsigns

  - id: git_stage_hunk
    name: "Stage Hunk"
    category: git-operations
    difficulty: 1
    description: "Stage the current hunk using <leader>hs (or your stage hunk keymap). The gutter sign changes to show it's staged."
    hint_action: "stage_hunk"
    hint_fallback: "Use your stage hunk keymap"
    filetype: javascript
    initial_buffer: |
      const unstaged = "new code";
    validation_type: different
    par_keystrokes: 3
    gold_base: 40
    required_plugin: gitsigns

  - id: git_reset_hunk
    name: "Reset Hunk"
    category: git-operations
    difficulty: 1
    description: "Reset (undo) the current hunk using <leader>hr (or your reset hunk keymap). The changes are reverted to the git version."
    hint_action: "reset_hunk"
    hint_fallback: "Use your reset hunk keymap"
    filetype: javascript
    initial_buffer: |
      const changed = "revert me";
    validation_type: different
    par_keystrokes: 3
    gold_base: 40
    required_plugin: gitsigns

  # Standard Git (5)
  - id: git_preview_hunk
    name: "Preview Hunk"
    category: git-operations
    difficulty: 2
    description: "Preview hunk diff using <leader>hp (or your preview hunk keymap). A popup shows the before/after changes."
    hint_action: "preview_hunk"
    hint_fallback: "Use your preview hunk keymap"
    filetype: javascript
    initial_buffer: |
      const modified = "changed";
    validation_type: different
    par_keystrokes: 3
    gold_base: 45
    required_plugin: gitsigns

  - id: git_blame_line
    name: "Blame Line"
    category: git-operations
    difficulty: 2
    description: "Show git blame using <leader>gb (or your blame keymap). See who last modified this line and when."
    hint_action: "blame_line"
    hint_fallback: "Use your blame keymap"
    filetype: text
    initial_buffer: |
      Who wrote this code?
      Show the blame info.
    validation_type: different
    par_keystrokes: 4
    gold_base: 45
    required_plugin: gitsigns

  - id: git_toggle_blame
    name: "Toggle Blame"
    category: git-operations
    difficulty: 2
    description: "Toggle inline git blame using <leader>tb (or your toggle blame keymap). Blame info appears/disappears on all lines."
    hint_action: "toggle_blame"
    hint_fallback: "Use your toggle blame keymap"
    filetype: text
    initial_buffer: |
      Toggle the blame display
      for all lines.
    validation_type: different
    par_keystrokes: 4
    gold_base: 45
    required_plugin: gitsigns

  - id: git_diff_this
    name: "Diff This"
    category: git-operations
    difficulty: 2
    description: "Show diff for current file using <leader>hd (or your diff keymap). Opens a split showing changes vs git version."
    hint_action: "diff_this"
    hint_fallback: "Use your diff keymap"
    filetype: javascript
    initial_buffer: |
      const modified = "changed";
    validation_type: different
    par_keystrokes: 3
    gold_base: 45
    required_plugin: gitsigns

  - id: git_stage_buffer
    name: "Stage Buffer"
    category: git-operations
    difficulty: 2
    description: "Stage entire buffer using <leader>hS (or your stage buffer keymap). All changes in the file are staged for commit."
    hint_action: "stage_buffer"
    hint_fallback: "Use your stage buffer keymap"
    filetype: javascript
    initial_buffer: |
      const allNew = "stage everything";
    validation_type: different
    par_keystrokes: 4
    gold_base: 50
    required_plugin: gitsigns

  # Complex Git (3)
  - id: git_conflict_ours
    name: "Choose Ours"
    category: git-operations
    difficulty: 3
    description: "Choose our version: cursor on conflict, use <leader>co (or your conflict ours keymap). Conflict markers are removed, our code stays."
    hint_action: "conflict_ours"
    hint_fallback: "Use your conflict ours keymap"
    filetype: text
    initial_buffer: |
      <<<<<<< HEAD
      our version
      =======
      their version
      >>>>>>> branch
    validation_type: different
    par_keystrokes: 4
    gold_base: 60

  - id: git_conflict_theirs
    name: "Choose Theirs"
    category: git-operations
    difficulty: 3
    description: "Choose their version: cursor on conflict, use <leader>ct (or your conflict theirs keymap). Conflict markers are removed, their code stays."
    hint_action: "conflict_theirs"
    hint_fallback: "Use your conflict theirs keymap"
    filetype: text
    initial_buffer: |
      <<<<<<< HEAD
      our version
      =======
      their version
      >>>>>>> branch
    validation_type: different
    par_keystrokes: 4
    gold_base: 60

  - id: git_diffview_open
    name: "Open Diffview"
    category: git-operations
    difficulty: 3
    description: "Open the diffview panel using <leader>dv or :DiffviewOpen (or your diffview keymap). See all file changes in a side-by-side view."
    hint_action: "diffview_open"
    hint_fallback: "Use your diffview keymap"
    filetype: text
    initial_buffer: |
      Open the diff viewer to see all changes.
    validation_type: different
    par_keystrokes: 4
    gold_base: 55
    required_plugin: diffview

  # ============================================
  # WINDOW MANAGEMENT CHALLENGES (10 total)
  # ============================================

  # Quick Window (5)
  - id: window_go_left
    name: "Window Left"
    category: window-management
    difficulty: 1
    description: "Go to left window using Ctrl-h or Ctrl-w h (or your window left keymap). Focus moves to the window on the left."
    hint_action: "window_left"
    hint_fallback: "Use Ctrl-h or Ctrl-w h"
    filetype: text
    initial_buffer: |
      Navigate to the left window
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  - id: window_go_down
    name: "Window Down"
    category: window-management
    difficulty: 1
    description: "Go to window below using Ctrl-j or Ctrl-w j (or your window down keymap). Focus moves to the window below."
    hint_action: "window_down"
    hint_fallback: "Use Ctrl-j or Ctrl-w j"
    filetype: text
    initial_buffer: |
      Navigate to the window below
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  - id: window_go_up
    name: "Window Up"
    category: window-management
    difficulty: 1
    description: "Go to window above using Ctrl-k or Ctrl-w k (or your window up keymap). Focus moves to the window above."
    hint_action: "window_up"
    hint_fallback: "Use Ctrl-k or Ctrl-w k"
    filetype: text
    initial_buffer: |
      Navigate to the window above
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  - id: window_go_right
    name: "Window Right"
    category: window-management
    difficulty: 1
    description: "Go to right window using Ctrl-l or Ctrl-w l (or your window right keymap). Focus moves to the window on the right."
    hint_action: "window_right"
    hint_fallback: "Use Ctrl-l or Ctrl-w l"
    filetype: text
    initial_buffer: |
      Navigate to the right window
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  - id: window_split_horizontal
    name: "Horizontal Split"
    category: window-management
    difficulty: 1
    description: "Create horizontal split using :split or Ctrl-w s (or your split keymap). The window splits into top and bottom."
    hint_action: "split_horizontal"
    hint_fallback: "Use :split or Ctrl-w s"
    filetype: text
    initial_buffer: |
      Split me horizontally
    validation_type: different
    par_keystrokes: 4
    gold_base: 30

  # Standard Window (4)
  - id: window_split_vertical
    name: "Vertical Split"
    category: window-management
    difficulty: 2
    description: "Create vertical split using :vsplit or Ctrl-w v (or your vsplit keymap). The window splits into left and right."
    hint_action: "split_vertical"
    hint_fallback: "Use :vsplit or Ctrl-w v"
    filetype: text
    initial_buffer: |
      Split me vertically
    validation_type: different
    par_keystrokes: 4
    gold_base: 35

  - id: window_resize_height
    name: "Resize Height"
    category: window-management
    difficulty: 2
    description: "Increase window height using Ctrl-w + or Ctrl-Up (or your resize keymap). The window becomes taller."
    hint_action: "resize_up"
    hint_fallback: "Use Ctrl-Up or Ctrl-w +"
    filetype: text
    initial_buffer: |
      Make this window taller
    validation_type: different
    par_keystrokes: 2
    gold_base: 35

  - id: window_resize_width
    name: "Resize Width"
    category: window-management
    difficulty: 2
    description: "Decrease window width using Ctrl-w < or Ctrl-Left (or your resize keymap). The window becomes narrower."
    hint_action: "resize_left"
    hint_fallback: "Use Ctrl-Left or Ctrl-w <"
    filetype: text
    initial_buffer: |
      Make this window narrower
    validation_type: different
    par_keystrokes: 2
    gold_base: 35

  - id: window_close
    name: "Close Window"
    category: window-management
    difficulty: 2
    description: "Close current window using :q or Ctrl-w q (or your close window keymap). The window disappears, buffer remains open."
    filetype: text
    initial_buffer: |
      Close this window
    validation_type: different
    par_keystrokes: 3
    gold_base: 30

  # Complex Window (1)
  - id: window_rotate
    name: "Rotate Windows"
    category: window-management
    difficulty: 3
    description: "Rotate window layout using Ctrl-w r (rotate) or Ctrl-w R (reverse). Windows swap positions in the layout."
    filetype: text
    initial_buffer: |
      Rotate the window positions
    validation_type: different
    par_keystrokes: 3
    gold_base: 50

  # ============================================
  # BUFFER MANAGEMENT CHALLENGES (8 total)
  # ============================================

  # Quick Buffer (4)
  - id: buffer_next
    name: "Next Buffer"
    category: buffer-management
    difficulty: 1
    description: "Switch to next buffer using ]b or :bn (or your next buffer keymap). Must have multiple buffers open."
    hint_action: "buffer_next"
    hint_fallback: "Use :bn or your next buffer keymap"
    filetype: text
    initial_buffer: |
      Switch to the next buffer
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  - id: buffer_prev
    name: "Previous Buffer"
    category: buffer-management
    difficulty: 1
    description: "Switch to previous buffer using [b or :bp (or your prev buffer keymap). Must have multiple buffers open."
    hint_action: "buffer_prev"
    hint_fallback: "Use :bp or your prev buffer keymap"
    filetype: text
    initial_buffer: |
      Switch to the previous buffer
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  - id: buffer_close
    name: "Close Buffer"
    category: buffer-management
    difficulty: 1
    description: "Close current buffer using :bd or <leader>x (or your close buffer keymap). The buffer is removed from the list."
    hint_action: "buffer_close"
    hint_fallback: "Use :bd or your close buffer keymap"
    filetype: text
    initial_buffer: |
      Close this buffer
    validation_type: different
    par_keystrokes: 3
    gold_base: 30

  - id: buffer_save
    name: "Save Buffer"
    category: buffer-management
    difficulty: 1
    description: "Save current buffer using :w or <leader>w (or your save keymap). Changes are written to disk."
    hint_action: "save"
    hint_fallback: "Use :w or your save keymap"
    filetype: text
    initial_buffer: |
      Save this buffer
    validation_type: different
    par_keystrokes: 2
    gold_base: 25

  # Standard Buffer (3)
  - id: buffer_close_all_but
    name: "Close Other Buffers"
    category: buffer-management
    difficulty: 2
    description: "Close all buffers except current using :%bd|e# or <leader>bo (or your close others keymap). Only this buffer remains."
    hint_action: "buffer_close_others"
    hint_fallback: "Use your close other buffers keymap"
    filetype: text
    initial_buffer: |
      Keep only this buffer open
    validation_type: different
    par_keystrokes: 4
    gold_base: 45

  - id: buffer_close_keep_window
    name: "Close Keep Window"
    category: buffer-management
    difficulty: 2
    description: "Close buffer but keep window using :bp|bd# (or your close-keep keymap). Buffer closes, window shows another buffer."
    hint_action: "buffer_close_keep"
    hint_fallback: "Use bp|bd# or similar"
    filetype: text
    initial_buffer: |
      Close buffer, keep window
    validation_type: different
    par_keystrokes: 5
    gold_base: 45

  - id: buffer_list
    name: "List Buffers"
    category: buffer-management
    difficulty: 2
    description: "Show list of open buffers using :ls or :buffers. A list appears showing all open buffer numbers and names."
    filetype: text
    initial_buffer: |
      List all open buffers
    validation_type: different
    par_keystrokes: 3
    gold_base: 35

  # Complex Buffer (1)
  - id: buffer_reopen
    name: "Reopen Closed"
    category: buffer-management
    difficulty: 3
    description: "Reopen last closed buffer using :e# or Ctrl-^ (switch to alternate). The previously edited file returns."
    filetype: text
    initial_buffer: |
      Reopen the buffer you just closed
    validation_type: different
    par_keystrokes: 4
    gold_base: 55

  # ============================================
  # FOLDING CHALLENGES (8 total)
  # ============================================

  # Quick Folding (3)
  - id: fold_toggle
    name: "Toggle Fold"
    category: folding
    difficulty: 1
    description: "Toggle fold using za. Cursor must be on a foldable line (function/block). The code collapses or expands."
    filetype: javascript
    initial_buffer: |
      function example() {
        const a = 1;
        const b = 2;
        return a + b;
      }
    cursor_start: [0, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  - id: fold_open
    name: "Open Fold"
    category: folding
    difficulty: 1
    description: "Open fold using zo. If the code is collapsed, it expands to show the contents inside."
    filetype: javascript
    initial_buffer: |
      function example() {
        const a = 1;
        return a;
      }
    cursor_start: [0, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  - id: fold_close
    name: "Close Fold"
    category: folding
    difficulty: 1
    description: "Close fold using zc. The code block under cursor collapses into a single line showing fold info."
    filetype: javascript
    initial_buffer: |
      function example() {
        const a = 1;
        return a;
      }
    cursor_start: [0, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  # Standard Folding (4)
  - id: fold_open_all
    name: "Open All Folds"
    category: folding
    difficulty: 2
    description: "Open all folds using zR. All collapsed code blocks in the file expand to show their contents."
    hint_action: "fold_open_all"
    hint_fallback: "Use zR to open all folds"
    filetype: javascript
    initial_buffer: |
      function one() { return 1; }
      function two() { return 2; }
      function three() { return 3; }
    validation_type: different
    par_keystrokes: 2
    gold_base: 40
    required_plugin: nvim-ufo

  - id: fold_close_all
    name: "Close All Folds"
    category: folding
    difficulty: 2
    description: "Close all folds using zM. All code blocks in the file collapse to single lines."
    hint_action: "fold_close_all"
    hint_fallback: "Use zM to close all folds"
    filetype: javascript
    initial_buffer: |
      function one() {
        return 1;
      }
      function two() {
        return 2;
      }
    validation_type: different
    par_keystrokes: 2
    gold_base: 40
    required_plugin: nvim-ufo

  - id: fold_peek
    name: "Peek Fold"
    category: folding
    difficulty: 2
    description: "Peek fold using zK or K (with nvim-ufo). See folded content in a floating window without expanding it."
    hint_action: "fold_peek"
    hint_fallback: "Use zK or your peek keymap"
    filetype: javascript
    initial_buffer: |
      function hidden() {
        // peek at this content
        return secret;
      }
    cursor_start: [0, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 45
    required_plugin: nvim-ufo

  - id: fold_open_recursive
    name: "Open Recursive"
    category: folding
    difficulty: 2
    description: "Open folds recursively using zO. Opens this fold and all nested folds inside it."
    filetype: javascript
    initial_buffer: |
      function outer() {
        function inner() {
          return 1;
        }
        return inner();
      }
    cursor_start: [0, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 45

  # Complex Folding (1)
  - id: fold_close_recursive
    name: "Close Recursive"
    category: folding
    difficulty: 3
    description: "Close folds recursively using zC. Closes this fold and all nested folds inside it."
    filetype: javascript
    initial_buffer: |
      function outer() {
        function inner() {
          function deep() {
            return 1;
          }
          return deep();
        }
        return inner();
      }
    cursor_start: [0, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 55

  # ============================================
  # QUICKFIX CHALLENGES (8 total)
  # ============================================

  # Quick Quickfix (3)
  - id: quickfix_next
    name: "Next Quickfix"
    category: quickfix
    difficulty: 1
    description: "Go to next quickfix using ]q or :cnext (or your quickfix next keymap). Must have quickfix list populated."
    hint_action: "quickfix_next"
    hint_fallback: "Use ]q or :cnext"
    filetype: text
    initial_buffer: |
      Navigate to next quickfix item
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  - id: quickfix_prev
    name: "Previous Quickfix"
    category: quickfix
    difficulty: 1
    description: "Go to previous quickfix using [q or :cprev (or your quickfix prev keymap). Must have quickfix list populated."
    hint_action: "quickfix_prev"
    hint_fallback: "Use [q or :cprev"
    filetype: text
    initial_buffer: |
      Navigate to previous quickfix item
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  - id: quickfix_close
    name: "Close Quickfix"
    category: quickfix
    difficulty: 1
    description: "Close the quickfix window using :cclose or <leader>xq (or your quickfix close keymap). The quickfix panel disappears."
    hint_action: "quickfix_close"
    hint_fallback: "Use :cclose or your keymap"
    filetype: text
    initial_buffer: |
      Close the quickfix window
    validation_type: different
    par_keystrokes: 3
    gold_base: 30

  # Standard Quickfix (4)
  - id: quickfix_open
    name: "Open Quickfix"
    category: quickfix
    difficulty: 2
    description: "Open the quickfix window using :copen or <leader>xo (or your quickfix open keymap). Shows the list of items."
    hint_action: "quickfix_open"
    hint_fallback: "Use :copen or your keymap"
    filetype: text
    initial_buffer: |
      Open the quickfix window
    validation_type: different
    par_keystrokes: 3
    gold_base: 35

  - id: quickfix_first
    name: "First Quickfix"
    category: quickfix
    difficulty: 2
    description: "Go to first quickfix item using [Q or :cfirst (or your quickfix first keymap). Jumps to the first item in the list."
    hint_action: "quickfix_first"
    hint_fallback: "Use [Q or :cfirst"
    filetype: text
    initial_buffer: |
      Go to first quickfix item
    validation_type: different
    par_keystrokes: 2
    gold_base: 35

  - id: quickfix_last
    name: "Last Quickfix"
    category: quickfix
    difficulty: 2
    description: "Go to last quickfix item using ]Q or :clast (or your quickfix last keymap). Jumps to the last item in the list."
    hint_action: "quickfix_last"
    hint_fallback: "Use ]Q or :clast"
    filetype: text
    initial_buffer: |
      Go to last quickfix item
    validation_type: different
    par_keystrokes: 2
    gold_base: 35

  - id: location_next
    name: "Next Location"
    category: quickfix
    difficulty: 2
    description: "Go to next location list item using ]l or :lnext (or your location next keymap). Location list is buffer-local."
    hint_action: "location_next"
    hint_fallback: "Use ]l or :lnext"
    filetype: text
    initial_buffer: |
      Navigate to next location item
    validation_type: different
    par_keystrokes: 2
    gold_base: 35

  # Complex Quickfix (1)
  - id: quickfix_do
    name: "Quickfix Do"
    category: quickfix
    difficulty: 3
    description: "Run on all quickfix items: e.g., :cdo s/old/new/g | update - replaces 'old' with 'new' in every quickfix file."
    filetype: text
    initial_buffer: |
      Apply a change to all quickfix items
    validation_type: different
    par_keystrokes: 10
    gold_base: 65

  # ============================================
  # DIAGNOSTICS CHALLENGES (6 total)
  # ============================================

  # Quick Diagnostics (2)
  - id: diagnostic_next
    name: "Next Diagnostic"
    category: diagnostics
    difficulty: 1
    description: "Go to next diagnostic using ]d (or your next diagnostic keymap). Cursor jumps to the next error/warning."
    hint_action: "diagnostic_next"
    hint_fallback: "Use ]d or your next diagnostic keymap"
    filetype: typescript
    initial_buffer: |
      const x: number = "string";
      const y: string = 123;
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  - id: diagnostic_prev
    name: "Previous Diagnostic"
    category: diagnostics
    difficulty: 1
    description: "Go to previous diagnostic using [d (or your prev diagnostic keymap). Cursor jumps to the previous error/warning."
    hint_action: "diagnostic_prev"
    hint_fallback: "Use [d or your prev diagnostic keymap"
    filetype: typescript
    initial_buffer: |
      const x: number = "string";
      const y: string = 123;
    cursor_start: [1, 0]
    validation_type: different
    par_keystrokes: 2
    gold_base: 30

  # Standard Diagnostics (3)
  - id: diagnostic_show
    name: "Show Diagnostic"
    category: diagnostics
    difficulty: 2
    description: "Show diagnostic using <leader>e or gl (or your diagnostic float keymap). Full error message appears in popup."
    hint_action: "diagnostic_float"
    hint_fallback: "Use your show diagnostic keymap"
    filetype: typescript
    initial_buffer: |
      const wrong: number = "not a number";
    cursor_start: [0, 22]
    validation_type: different
    par_keystrokes: 3
    gold_base: 40

  - id: diagnostic_goto_error
    name: "Go to Error"
    category: diagnostics
    difficulty: 2
    description: "Jump to next error (skip warnings) using ]e or diagnostic_goto_next({severity = ERROR}). Ignores warnings."
    filetype: typescript
    initial_buffer: |
      // warning here
      const error: number = "string";
    validation_type: different
    par_keystrokes: 3
    gold_base: 45

  - id: diagnostic_set_loclist
    name: "Set Location List"
    category: diagnostics
    difficulty: 2
    description: "Set location list using :lua vim.diagnostic.setloclist() or <leader>q. Opens a list of all diagnostics in this file."
    filetype: typescript
    initial_buffer: |
      const a: number = "1";
      const b: string = 2;
    validation_type: different
    par_keystrokes: 5
    gold_base: 50

  # Complex Diagnostics (1)
  - id: diagnostic_disable_buffer
    name: "Disable Diagnostics"
    category: diagnostics
    difficulty: 3
    description: "Disable diagnostics using :lua vim.diagnostic.disable(0) or your toggle keymap. The red squiggles disappear."
    filetype: typescript
    initial_buffer: |
      // Disable the red squiggles
      const x: any = "anything";
    validation_type: different
    par_keystrokes: 6
    gold_base: 55

  # ============================================
  # TELESCOPE CHALLENGES (10 total)
  # ============================================

  # Quick Telescope (4)
  - id: telescope_find_files
    name: "Find Files"
    category: telescope
    difficulty: 1
    description: "Open file finder using <leader>ff (or your find files keymap). Type to fuzzy-search filenames in your project."
    hint_action: "find_files"
    hint_fallback: "Use your find files keymap"
    filetype: text
    initial_buffer: |
      Find a file in your project
    validation_type: different
    par_keystrokes: 3
    gold_base: 35
    required_plugin: telescope

  - id: telescope_buffers
    name: "Find Buffers"
    category: telescope
    difficulty: 1
    description: "Open buffer picker using <leader>fb (or your buffers keymap). Type to fuzzy-search open buffers."
    hint_action: "find_buffers"
    hint_fallback: "Use your buffers keymap"
    filetype: text
    initial_buffer: |
      Pick from open buffers
    validation_type: different
    par_keystrokes: 3
    gold_base: 35
    required_plugin: telescope

  - id: telescope_oldfiles
    name: "Recent Files"
    category: telescope
    difficulty: 1
    description: "Open recent files picker using <leader>fr (or your recent files keymap). Shows files you've recently edited."
    hint_action: "oldfiles"
    hint_fallback: "Use your recent files keymap"
    filetype: text
    initial_buffer: |
      Find recently opened files
    validation_type: different
    par_keystrokes: 3
    gold_base: 35
    required_plugin: telescope

  - id: telescope_resume
    name: "Resume Picker"
    category: telescope
    difficulty: 1
    description: "Resume last telescope picker using <leader>f. (or your resume keymap). Returns to your previous search."
    hint_action: "telescope_resume"
    hint_fallback: "Use your resume keymap"
    filetype: text
    initial_buffer: |
      Resume the last search
    validation_type: different
    par_keystrokes: 3
    gold_base: 35
    required_plugin: telescope

  # Standard Telescope (4)
  - id: telescope_live_grep
    name: "Live Grep"
    category: telescope
    difficulty: 2
    description: "Live grep project using <leader>fg (or your live grep keymap). Type to search content across all files."
    hint_action: "live_grep"
    hint_fallback: "Use your live grep keymap"
    filetype: text
    initial_buffer: |
      Search for text across all files
    validation_type: different
    par_keystrokes: 4
    gold_base: 45
    required_plugin: telescope

  - id: telescope_keymaps
    name: "Find Keymaps"
    category: telescope
    difficulty: 2
    description: "Search keymaps using <leader>fk (or your keymaps keymap). Find any keybinding by description or keys."
    hint_action: "find_keymaps"
    hint_fallback: "Use your keymaps keymap"
    filetype: text
    initial_buffer: |
      Search through your keybindings
    validation_type: different
    par_keystrokes: 4
    gold_base: 45
    required_plugin: telescope

  - id: telescope_current_buffer
    name: "Search Buffer"
    category: telescope
    difficulty: 2
    description: "Fuzzy find in current buffer using <leader>/ (or your buffer search keymap). Search within this file only."
    hint_action: "buffer_fuzzy"
    hint_fallback: "Use your buffer search keymap"
    filetype: text
    initial_buffer: |
      Search within this buffer
      for specific text
      anywhere in the file
    validation_type: different
    par_keystrokes: 3
    gold_base: 40
    required_plugin: telescope

  - id: telescope_help
    name: "Search Help"
    category: telescope
    difficulty: 2
    description: "Search help tags using <leader>fh (or your help tags keymap). Find documentation for any vim topic."
    hint_action: "help_tags"
    hint_fallback: "Use your help tags keymap"
    filetype: text
    initial_buffer: |
      Search vim help documentation
    validation_type: different
    par_keystrokes: 4
    gold_base: 40
    required_plugin: telescope

  # Complex Telescope (2)
  - id: telescope_from_directory
    name: "Find from Directory"
    category: telescope
    difficulty: 3
    description: "Find files from a specific directory using telescope with cwd option. Narrows search to a folder."
    hint_action: "find_from_dir"
    hint_fallback: "Use your find from directory keymap"
    filetype: text
    initial_buffer: |
      Find files in a specific folder
    validation_type: different
    par_keystrokes: 6
    gold_base: 55
    required_plugin: telescope

  - id: telescope_lsp_references
    name: "LSP References"
    category: telescope
    difficulty: 3
    description: "Find LSP references using gr or <leader>gr (or your references keymap). Shows all usages of symbol under cursor."
    hint_action: "find_references"
    hint_fallback: "Use gr or telescope LSP references"
    filetype: javascript
    initial_buffer: |
      const target = 1;
      console.log(target);
      process(target);
    cursor_start: [0, 6]
    validation_type: different
    par_keystrokes: 3
    gold_base: 55
    required_plugin: telescope

  # ============================================
  # SURROUND CHALLENGES (8 total)
  # ============================================

  # Quick Surround (3)
  - id: surround_delete_quotes
    name: "Delete Quotes"
    category: surround
    difficulty: 1
    description: "Delete quotes using sd\" (mini.surround) or ds\" (vim-surround). \"hello\" becomes hello without quotes."
    filetype: javascript
    initial_buffer: |
      const msg = "hello";
    cursor_start: [0, 14]
    expected_buffer: |
      const msg = hello;
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 35
    required_plugin: mini.surround

  - id: surround_delete_parens
    name: "Delete Parens"
    category: surround
    difficulty: 1
    description: "Delete parens using sd( (mini.surround) or ds( (vim-surround). (value + 10) becomes value + 10."
    filetype: javascript
    initial_buffer: |
      const result = (value + 10);
    cursor_start: [0, 18]
    expected_buffer: |
      const result = value + 10;
    validation_type: exact_match
    par_keystrokes: 3
    gold_base: 35
    required_plugin: mini.surround

  - id: surround_change_quotes
    name: "Change Quotes"
    category: surround
    difficulty: 1
    description: "Change quotes using sr'\" (mini.surround) or cs'\" (vim-surround). 'hello' becomes \"hello\"."
    filetype: javascript
    initial_buffer: |
      const msg = 'hello';
    cursor_start: [0, 14]
    expected_buffer: |
      const msg = "hello";
    validation_type: exact_match
    par_keystrokes: 4
    gold_base: 40
    required_plugin: mini.surround

  # Standard Surround (4)
  - id: surround_add_quotes
    name: "Add Quotes"
    category: surround
    difficulty: 2
    description: "Add quotes using saiw\" (mini.surround) or ysiw\" (vim-surround). hello becomes \"hello\"."
    filetype: javascript
    initial_buffer: |
      const msg = hello;
    cursor_start: [0, 12]
    expected_buffer: |
      const msg = "hello";
    validation_type: exact_match
    par_keystrokes: 5
    gold_base: 45
    required_plugin: mini.surround

  - id: surround_add_parens
    name: "Add Parentheses"
    category: surround
    difficulty: 2
    description: "Add parens using saiw( (mini.surround) or ysiw( (vim-surround). value becomes (value)."
    filetype: javascript
    initial_buffer: |
      return value;
    cursor_start: [0, 7]
    expected_buffer: |
      return (value);
    validation_type: exact_match
    par_keystrokes: 5
    gold_base: 45
    required_plugin: mini.surround

  - id: surround_visual
    name: "Visual Surround"
    category: surround
    difficulty: 2
    description: "Surround selection: 1) v to visual, 2) Select '1, 2, 3', 3) sa[ (mini.surround) or S[ (vim-surround). Result: [1, 2, 3]."
    filetype: javascript
    initial_buffer: |
      const arr = 1, 2, 3;
    cursor_start: [0, 12]
    expected_buffer: |
      const arr = [1, 2, 3];
    validation_type: exact_match
    par_keystrokes: 7
    gold_base: 50
    required_plugin: mini.surround

  - id: surround_change_tag
    name: "Change Tag"
    category: surround
    difficulty: 2
    description: "Change tag using srt (mini.surround) or cst (vim-surround). Change div to span, then type span."
    filetype: html
    initial_buffer: |
      <div>content</div>
    cursor_start: [0, 5]
    expected_buffer: |
      <span>content</span>
    validation_type: exact_match
    par_keystrokes: 8
    gold_base: 55
    required_plugin: mini.surround

  # Complex Surround (1)
  - id: surround_function
    name: "Wrap with Function"
    category: surround
    difficulty: 3
    description: "Wrap with function: select 'value * 2', then saf (mini.surround) or ysf (vim-surround), then type Math.abs."
    filetype: javascript
    initial_buffer: |
      const result = value * 2;
    cursor_start: [0, 15]
    expected_buffer: |
      const result = Math.abs(value * 2);
    validation_type: contains
    expected_content: "Math.abs("
    par_keystrokes: 12
    gold_base: 65
    required_plugin: mini.surround

  # ============================================
  # HARPOON CHALLENGES (5 total)
  # ============================================

  # Quick Harpoon (2)
  - id: harpoon_add
    name: "Add to Harpoon"
    category: harpoon
    difficulty: 1
    description: "Add current file to harpoon using <leader>a (or your harpoon add keymap). File is now in your quick-nav list."
    hint_action: "harpoon_add"
    hint_fallback: "Use your harpoon add keymap"
    filetype: text
    initial_buffer: |
      Add this file to harpoon marks
    validation_type: different
    par_keystrokes: 3
    gold_base: 35
    required_plugin: harpoon

  - id: harpoon_menu
    name: "Harpoon Menu"
    category: harpoon
    difficulty: 1
    description: "Toggle harpoon menu using Ctrl-e (or your harpoon menu keymap). Shows your quick-nav file list."
    hint_action: "harpoon_menu"
    hint_fallback: "Use your harpoon menu keymap"
    filetype: text
    initial_buffer: |
      Open the harpoon menu
    validation_type: different
    par_keystrokes: 2
    gold_base: 35
    required_plugin: harpoon

  # Standard Harpoon (2)
  - id: harpoon_nav_1
    name: "Harpoon File 1"
    category: harpoon
    difficulty: 2
    description: "Navigate to harpoon file 1 using <leader>1 or Ctrl-h (or your harpoon 1 keymap). Instantly opens first file."
    hint_action: "harpoon_1"
    hint_fallback: "Use your harpoon 1 keymap"
    filetype: text
    initial_buffer: |
      Jump to first harpooned file
    validation_type: different
    par_keystrokes: 2
    gold_base: 40
    required_plugin: harpoon

  - id: harpoon_nav_2
    name: "Harpoon File 2"
    category: harpoon
    difficulty: 2
    description: "Navigate to harpoon file 2 using <leader>2 or Ctrl-t (or your harpoon 2 keymap). Instantly opens second file."
    hint_action: "harpoon_2"
    hint_fallback: "Use your harpoon 2 keymap"
    filetype: text
    initial_buffer: |
      Jump to second harpooned file
    validation_type: different
    par_keystrokes: 2
    gold_base: 40
    required_plugin: harpoon

  # Complex Harpoon (1)
  - id: harpoon_reorder
    name: "Reorder Harpoon"
    category: harpoon
    difficulty: 3
    description: "Reorder files in harpoon menu: 1) Open menu, 2) Use j/k or dd/p to move files around, 3) Close to save."
    hint_action: "harpoon_menu"
    hint_fallback: "Open menu and reorder with j/k"
    filetype: text
    initial_buffer: |
      Reorder your harpoon file list
    validation_type: different
    par_keystrokes: 6
    gold_base: 55
    required_plugin: harpoon

  # ============================================
  # FORMATTING CHALLENGES (5 total)
  # ============================================

  # Quick Formatting (2)
  - id: format_buffer
    name: "Format Buffer"
    category: formatting
    difficulty: 1
    description: "Format entire buffer using <leader>f or :lua vim.lsp.buf.format() (or your format keymap). Code gets prettified."
    hint_action: "format"
    hint_fallback: "Use your format keymap"
    filetype: javascript
    initial_buffer: |
      const x=1;const y=2;function foo(){return x+y}
    validation_type: different
    par_keystrokes: 3
    gold_base: 35

  - id: format_indent
    name: "Auto Indent"
    category: formatting
    difficulty: 1
    description: "Auto-indent a block using =ip (indent paragraph) or =G (indent to end). Fixes indentation of selected code."
    filetype: javascript
    initial_buffer: |
      function example() {
      const a = 1;
      if (a) {
      return true;
      }
      }
    expected_buffer: |
      function example() {
        const a = 1;
        if (a) {
          return true;
        }
      }
    validation_type: exact_match
    par_keystrokes: 4
    gold_base: 40

  # Standard Formatting (2)
  - id: format_organize_imports
    name: "Organize Imports"
    category: formatting
    difficulty: 2
    description: "Organize imports: 1) Press <leader>ca (code action), 2) Select 'Organize Imports'. Imports get sorted/grouped."
    hint_action: "code_action"
    hint_fallback: "Use code action to organize imports"
    filetype: typescript
    initial_buffer: |
      import { z } from 'zod';
      import { readFile } from 'fs';
      import { join } from 'path';
    validation_type: different
    par_keystrokes: 5
    gold_base: 50

  - id: format_retab
    name: "Convert Tabs"
    category: formatting
    difficulty: 2
    description: "Convert tabs to spaces using :retab. This replaces all tab characters with spaces based on 'tabstop' setting."
    filetype: javascript
    initial_buffer: "function example() {\n\treturn true;\n}"
    validation_type: different
    par_keystrokes: 7
    gold_base: 45

  # Complex Formatting (1)
  - id: format_visual_range
    name: "Format Selection"
    category: formatting
    difficulty: 3
    description: "Format selection: 1) V to select the ugly line, 2) Use gq or your range format keymap. Only the selected code is formatted."
    filetype: javascript
    initial_buffer: |
      const good = true;
      const ugly={a:1,b:2,c:3};
      const alsoGood = false;
    cursor_start: [1, 0]
    validation_type: different
    par_keystrokes: 6
    gold_base: 55
